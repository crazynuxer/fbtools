#!/usr/bin/python2
# DO NOT REMOVE THIS LINE - coding: utf-8
from __future__ import print_function
import os, sys, getopt
from pgmagick import *
import fb

color="black"
device="/dev/fb0"
debug=False

try:

    opts, args = getopt.getopt(sys.argv[1:],"c:d:")
    for opt, arg in opts:
        if   opt == "-c": color=arg.lower()
        elif opt == "-d": device=arg
        else: raise Exception("Invalid option '%s'" % opt)
    if len(args): raise Exception("Unexpected argument '%s'" % ' '.join(args)) 

except Exception as e:

    print (str(e),"""

Usage:

    fbclear [options]

Clear the frame buffer. 

Options are:

    -c color                - background color, default is "black"
    -d device               - framebuffer device, default is "/dev/fb0"
""", file=sys.stderr)

    quit(1)

fb=fb.framebuffer(device)
im=Image(Geometry(fb.width, fb.height), Color(color))
blob=Blob()
im.write(blob,"RGB",8)
fb.pack(blob.data)
